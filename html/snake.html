<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flower Snake Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg: #fdf7f9;
      --accent: #f38ca3;
      --accent-soft: rgba(243, 140, 163, 0.18);
      --accent-green: #8ac7a8;
      --text: #353338;
      --muted: #8b8791;
      --card-bg: rgba(255, 255, 255, 0.96);
      --border-soft: rgba(0, 0, 0, 0.06);
      --shadow-soft: 0 20px 45px rgba(0, 0, 0, 0.08);
      --radius-xl: 28px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #fffafc 0%, #fdeef3 40%, #f6f7fb 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2.5rem 1.5rem;
      text-align: center;
    }

    main.page {
      max-width: 1040px; /* slightly wider */
      width: 100%;
      border-radius: 40px;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-soft);
    }

    .inner {
      padding: 2.4rem 2.1rem 2.3rem;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      padding: 0.35rem 0.85rem;
      border-radius: 999px;
      background: rgba(243, 140, 163, 0.12);
      border: 1px solid var(--border-soft);
      font-size: 0.78rem;
      letter-spacing: 0.17em;
      text-transform: uppercase;
      color: var(--muted);
      margin-inline: auto;
    }

    .pill .icon {
      font-size: 0.9rem;
    }

    h1 {
      font-family: "Playfair Display", "Times New Roman", serif;
      font-size: clamp(2.1rem, 3vw, 2.6rem);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-weight: 600;
    }

    h1 span.highlight {
      position: relative;
      display: inline-block;
      padding: 0 0.15em;
    }

    h1 span.highlight::after {
      content: "";
      position: absolute;
      inset: 75% -4px -3px;
      background: var(--accent-soft);
      border-radius: 999px;
      z-index: -1;
    }

    .subtitle {
      font-size: 0.96rem;
      color: var(--muted);
      max-width: 480px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .hero-icons {
      display: flex;
      justify-content: center;
      gap: 0.4rem;
      font-size: 1.3rem;
      margin-top: 0.4rem;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
      gap: 1.8rem;
      align-items: center;
      margin-top: 0.5rem;
    }

    @media (max-width: 820px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .game-shell {
      background: linear-gradient(145deg, #fff, #ffeef5);
      padding: 1.4rem;
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-soft);
      box-shadow: 0 14px 28px rgba(0, 0, 0, 0.06);
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
      align-items: center;
      justify-content: center;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      gap: 0.75rem;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .score-box,
    .status-box {
      padding: 0.45rem 0.75rem;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(255, 255, 255, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      white-space: nowrap;
    }

    .score-label {
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-size: 0.7rem;
    }

    .score-value {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .status-text {
      font-size: 0.8rem;
    }

    canvas {
      background: radial-gradient(circle at top, #fdf7fb 0%, #f7f4ff 40%, #f3f6ff 100%);
      border-radius: 24px;
      border: 1px solid var(--border-soft);
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.08);
      image-rendering: pixelated;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.2rem;
    }

    .controls span {
      display: block;
    }

    .btn {
      margin-top: 0.4rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.3rem;
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: white;
      font-size: 0.85rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(243, 140, 163, 0.4);
      transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(243, 140, 163, 0.45);
      filter: brightness(1.03);
    }

    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 8px 16px rgba(243, 140, 163, 0.3);
    }

    .info-card {
      text-align: left;
      padding: 1.3rem 1.2rem;
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-soft);
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.04);
      font-size: 0.92rem;
      line-height: 1.6;
      position: relative;
      overflow: hidden;
    }

    .info-card::before {
      content: "";
      position: absolute;
      inset: -30%;
      background-image: url("https://images.pexels.com/photos/3520962/pexels-photo-3520962.jpeg?auto=compress&cs=tinysrgb&w=800");
      background-size: cover;
      background-position: center;
      opacity: 0.06;
      mix-blend-mode: soft-light;
      pointer-events: none;
    }

    .info-inner {
      position: relative;
      z-index: 1;
    }

    .info-title {
      font-family: "Playfair Display", "Times New Roman", serif;
      font-size: 1.1rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 0.4rem;
    }

    .info-points {
      margin-top: 0.4rem;
    }

    .info-points li {
      margin-left: 1.1rem;
      margin-top: 0.28rem;
    }

    footer {
      margin-top: 0.8rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    footer .note-label {
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-size: 0.7rem;
      margin-bottom: 0.2rem;
    }

    /* Bigger game on desktop, smaller on mobile */
    @media (max-width: 640px) {
      .inner {
        padding: 2rem 1.4rem 2rem;
      }

      canvas {
        width: 320px;
        height: 320px;
      }
    }

    @media (min-width: 641px) {
      canvas {
        width: 480px;
        height: 480px;
      }
    }
  </style>
</head>
<body>
  <main class="page">
    <div class="inner">
      <header>
        <div class="pill">
          <span class="icon">ðŸŒ·</span> PASTEL ARCADE
        </div>
        <h1>
          Flower <span class="highlight">Snake</span>
        </h1>
        <p class="subtitle">
          Guide a soft green snake through a pastel garden and let it snack on tiny flowers.
          Donâ€™t bump into the wallsâ€”or into yourself.
        </p>
        <div class="hero-icons">
          <span>ðŸŒ¸</span><span>ðŸŒ·</span><span>ðŸ’®</span><span>ðŸŒ·</span><span>ðŸŒ¸</span>
        </div>
      </header>

      <div class="layout">
        <!-- GAME AREA -->
        <section class="game-shell" aria-label="Flower Snake Game">
          <div class="game-header">
            <div class="score-box">
              <span class="score-label">Score</span>
              <span class="score-value" id="score">0</span>
            </div>
            <div class="status-box">
              <span class="status-text" id="status">Press Space or Click Play</span>
            </div>
          </div>

          <!-- BIGGER CANVAS -->
          <canvas id="gameCanvas" width="480" height="480" aria-label="Snake game board"></canvas>

          <div class="controls">
            <span>âž¤ Use <strong>arrow keys</strong> or <strong>W / A / S / D</strong> to move.</span>
            <span>âž¤ <strong>Space</strong> or <strong>Play</strong> to start / restart.</span>
            <button class="btn" id="playButton">
              <span>â–¶</span> Play
            </button>
          </div>
        </section>

        <!-- INFO / FLAVOR TEXT -->
        <aside class="info-card" aria-label="How to play">
          <div class="info-inner">
            <div class="info-title">How to Play</div>
            <p>
              Youâ€™re a gentle mint-green snake weaving through a floral grid.
              Every time you eat a <strong>flower</strong> ðŸŒ¸, you grow longer and your score increases.
            </p>
            <ul class="info-points">
              <li><strong>Avoid walls:</strong> straying beyond the garden border ends the game.</li>
              <li><strong>Avoid yourself:</strong> if you curl back into your own body, itâ€™s game over.</li>
              <li><strong>Collect flowers:</strong> each bloom makes the snake just a little longer.</li>
            </ul>
            <p class="info-points" style="margin-top:0.6rem;">
              Play with soft focus: minimal visuals, cozy colors, and just enough challenge to keep it zen.
            </p>
          </div>
        </aside>
      </div>

      <footer>
        <div class="note-label">ðŸŒ· Garden Mode</div>
        <p>
          A classic arcade game reimagined as a pastel garden walk.
          Take a breath, move slowly, and let the snake enjoy the flowers.
        </p>
      </footer>
    </div>
  </main>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");
    const statusEl = document.getElementById("status");
    const playBtn = document.getElementById("playButton");

    const tileCount = 18; // grid 18x18
    const tileSize = canvas.width / tileCount;

    let snake;
    let direction;
    let nextDirection;
    let flower;
    let score;
    let gameLoopId = null;
    let gameOver = false;
    const flowerEmoji = "ðŸŒ¸";

    function initGame() {
      const startX = Math.floor(tileCount / 2);
      const startY = Math.floor(tileCount / 2);

      snake = [
        { x: startX, y: startY },
        { x: startX - 1, y: startY },
        { x: startX - 2, y: startY }
      ];
      direction = { x: 1, y: 0 };
      nextDirection = { x: 1, y: 0 };
      score = 0;
      gameOver = false;

      scoreEl.textContent = score;
      statusEl.textContent = "Collect flowers, avoid walls & yourself";
      spawnFlower();
      if (gameLoopId) {
        clearInterval(gameLoopId);
      }
      gameLoopId = setInterval(gameTick, 130);
      draw();
    }

    function spawnFlower() {
      let newFlower;
      let collision;
      do {
        collision = false;
        newFlower = {
          x: Math.floor(Math.random() * tileCount),
          y: Math.floor(Math.random() * tileCount)
        };
        // avoid spawning inside the snake
        for (const segment of snake) {
          if (segment.x === newFlower.x && segment.y === newFlower.y) {
            collision = true;
            break;
          }
        }
      } while (collision);
      flower = newFlower;
    }

    function setDirection(dx, dy) {
      // prevent reversing directly
      if (dx === -direction.x && dy === -direction.y) return;
      nextDirection = { x: dx, y: dy };
    }

    function gameTick() {
      if (gameOver) return;

      direction = nextDirection;

      const head = snake[0];
      const newHead = {
        x: head.x + direction.x,
        y: head.y + direction.y
      };

      // wall collision
      if (
        newHead.x < 0 ||
        newHead.x >= tileCount ||
        newHead.y < 0 ||
        newHead.y >= tileCount
      ) {
        endGame();
        return;
      }

      // self collision
      for (const segment of snake) {
        if (segment.x === newHead.x && segment.y === newHead.y) {
          endGame();
          return;
        }
      }

      snake.unshift(newHead);

      // flower collision
      if (newHead.x === flower.x && newHead.y === flower.y) {
        score += 1;
        scoreEl.textContent = score;
        spawnFlower();
      } else {
        snake.pop(); // move forward
      }

      draw();
    }

    function endGame() {
      gameOver = true;
      statusEl.textContent = "Game over â€” press Space or Play to restart";
      if (gameLoopId) {
        clearInterval(gameLoopId);
        gameLoopId = null;
      }
      drawGameOverOverlay();
    }

    function drawGrid() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // soft grid
      ctx.strokeStyle = "rgba(255, 255, 255, 0.45)";
      ctx.lineWidth = 1;

      for (let i = 1; i < tileCount; i++) {
        const pos = i * tileSize;
        // vertical
        ctx.beginPath();
        ctx.moveTo(pos, 0);
        ctx.lineTo(pos, canvas.height);
        ctx.stroke();
        // horizontal
        ctx.beginPath();
        ctx.moveTo(0, pos);
        ctx.lineTo(canvas.width, pos);
        ctx.stroke();
      }
    }

    function drawSnake() {
      // gradient-like body
      snake.forEach((segment, index) => {
        const ratio = index / Math.max(1, snake.length - 1);
        const baseGreen = 200;
        const green = baseGreen + Math.round((255 - baseGreen) * ratio);
        ctx.fillStyle = `rgba(138, ${green}, 168, 0.95)`;
        const sizeOffset = index === 0 ? 2 : 3;
        const s = tileSize - sizeOffset * 2;
        const x = segment.x * tileSize + sizeOffset;
        const y = segment.y * tileSize + sizeOffset;

        // rounded square for each segment
        const r = 6;
        ctx.beginPath();
        ctx.moveTo(x + r, y);
        ctx.lineTo(x + s - r, y);
        ctx.quadraticCurveTo(x + s, y, x + s, y + r);
        ctx.lineTo(x + s, y + s - r);
        ctx.quadraticCurveTo(x + s, y + s, x + s - r, y + s);
        ctx.lineTo(x + r, y + s);
        ctx.quadraticCurveTo(x, y + s, x, y + s - r);
        ctx.lineTo(x, y + r);
        ctx.quadraticCurveTo(x, y, x + r, y);
        ctx.closePath();
        ctx.fill();
      });

      // tiny eyes on the head
      const head = snake[0];
      const centerX = head.x * tileSize + tileSize / 2;
      const centerY = head.y * tileSize + tileSize / 2;

      ctx.fillStyle = "#ffffff";
      const eyeOffset = 4;
      if (direction.x === 1) {
        // moving right
        drawEye(centerX + eyeOffset, centerY - 3);
        drawEye(centerX + eyeOffset, centerY + 3);
      } else if (direction.x === -1) {
        drawEye(centerX - eyeOffset, centerY - 3);
        drawEye(centerX - eyeOffset, centerY + 3);
      } else if (direction.y === 1) {
        drawEye(centerX - 3, centerY + eyeOffset);
        drawEye(centerX + 3, centerY + eyeOffset);
      } else if (direction.y === -1) {
        drawEye(centerX - 3, centerY - eyeOffset);
        drawEye(centerX + 3, centerY - eyeOffset);
      }
    }

    function drawEye(x, y) {
      ctx.beginPath();
      ctx.arc(x, y, 2, 0, Math.PI * 2);
      ctx.fill();
    }

    function drawFlower() {
      ctx.font = `${Math.floor(tileSize * 0.9)}px system-ui, sans-serif`;
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      const x = flower.x * tileSize + tileSize / 2;
      const y = flower.y * tileSize + tileSize / 2;
      ctx.fillText(flowerEmoji, x, y + 1); // small vertical tweak
    }

    function drawGameOverOverlay() {
      ctx.save();
      ctx.fillStyle = "rgba(253, 247, 249, 0.85)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "#353338";
      ctx.textAlign = "center";
      ctx.font = "700 26px 'Playfair Display', serif";
      ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2 - 10);

      ctx.font = "400 14px 'Montserrat', system-ui";
      ctx.fillText("Press Space or click Play to try again", canvas.width / 2, canvas.height / 2 + 18);
      ctx.restore();
    }

    function draw() {
      drawGrid();
      drawSnake();
      drawFlower();
      if (gameOver) {
        drawGameOverOverlay();
      }
    }

    // Controls
    document.addEventListener("keydown", (e) => {
      switch (e.key) {
        case "ArrowUp":
        case "w":
        case "W":
          setDirection(0, -1);
          break;
        case "ArrowDown":
        case "s":
        case "S":
          setDirection(0, 1);
          break;
        case "ArrowLeft":
        case "a":
        case "A":
          setDirection(-1, 0);
          break;
        case "ArrowRight":
        case "d":
        case "D":
          setDirection(1, 0);
          break;
        case " ":
          if (gameOver || !gameLoopId) {
            initGame();
          }
          break;
      }
    });

    playBtn.addEventListener("click", () => {
      if (gameOver || !gameLoopId) {
        initGame();
      }
    });

    // initial static board
    drawGrid();
    statusEl.textContent = "Press Space or Play to begin";
  </script>
</body>
</html>
